jar {
	if(project.hasProperty('JarName')){
		baseName = project.getProperty('JarName')
	}
	from sourceSets.main.output
	getManifest(gitVersion)

	exclude '**/test/**'
}

task sourceJar(type: Jar) {
	if(project.hasProperty('JarName')){
		baseName = project.getProperty('JarName')
	}
	from (sourceSets.main.allJava + sourceSets.main.output ); classifier = 'sources'
	getManifest(gitVersion)

	exclude '**/test/**'
}
task javadocJar(type: Jar) {
	if(project.hasProperty('JarName')){
		baseName = project.getProperty('JarName')
	}
	from javadoc.outputs.files; classifier = 'javadoc'
	getManifest(gitVersion)
	exclude '**/test/**'
}

task fullJar(type: Jar) {
	if(project.hasProperty('JarName')){
		baseName = project.getProperty('JarName')
	}
	getManifest(gitVersion)
	from {(
			sourceSets.main.output +
			sourceSets.main.allJava +
			javadoc.outputs.files
			)}
	classifier = 'full'
	exclude '**/test/**'
}

def getManifest(gitVersion) {
	manifest {
		attributes 'Specification-Version': gitVersion.major+"."+gitVersion.minor+"."+gitVersion.revision,
			'Implementation-Title': 'Networkparser',
			'Specification-Title': 'Networkparser',
			'Built-Time': gitVersion.buildTime,
			'Created-By': gitVersion.major+"."+gitVersion.minor+"."+gitVersion.revision+" "+System.properties['user.name'],
			'Built-By': "${System.properties['user.name']}",
			'Location': "${System.properties['user.language']}",
			'Version': gitVersion.revision,
			'Author': 'Stefan Lindel',
			'Implementation-Version': gitVersion.major+"."+gitVersion.minor+"."+gitVersion.revision,
			'GIT-Revision': gitVersion.revision,
			'Java-Version': "${System.properties['java.version']}",
			'Bundle-Description': 'NetworkParser',
			'Bundle-ClassPath': '.'
	}
}

