// -PlectureBuild -Pjenkins clean --refresh-dependencies build artifactoryPublish
// gradlew clean test build jar build javadocJar build fatJar
// gradlew clean test build jar build javadocJar build fatJar -PNetworkParserFX 
// gradlew javadoc all
apply plugin: 'java'
apply plugin: 'maven'
apply from: 'gradle/version.gradle'
apply from: 'gradle/tasks.gradle'
apply from: 'gradle/NetworkParser.gradle'

// only for jenkins
if(project.hasProperty('jenkins')) {
	apply from: 'gradle/artifactory.gradle'
    apply plugin: 'jacoco'
	
	//tbd - need configuration
	//apply plugin: 'checkstyle'
	//apply plugin: 'findbugs'
} else {
	apply from: 'gradle/ide.gradle'
}

sourceSets {
	main {
		java { 
			srcDir 'NetworkParser/src/main/java'
		}
		resources {
			srcDir 'NetworkParser/src/main/resources'
		}
		output.classesDir 'NetworkParser/bin'
	}
	test{
		java {
			srcDir 'NetworkParser/src/test/java'
		}
		resources {
			srcDir 'NetworkParser/src/test/resources'
		}
	}
}

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '2.2.4')
    }
}

sourceCompatibility = 1.7
targetCompatibility = 1.7

repositories {
	mavenCentral()
}

dependencies {
	testCompile group: 'junit', name: 'junit', version: '4.+'
}
subprojects {
    task hello << { task -> println "I'm $task.project.name" }
}

task all(type: Jar) {
	tasks.sourceJar.execute() 
	tasks.javadocJar.execute() 
	tasks.fatJar.execute() 
}