// -PlectureBuild -Pjenkins clean --refresh-dependencies build
apply plugin: 'java'
apply plugin: 'maven'
apply from: 'gradle/version.gradle'
apply from: 'gradle/tasks.gradle'
apply plugin: 'jacoco'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply from: 'gradle/mavencentral.gradle'
apply from: 'gradle/artifactory.gradle'

idea {
	project {
		jdkName = '1.7'
		languageLevel = '1.7'
	}
}

repositories {
	jcenter()
	mavenCentral()
}
test {
	// enable TestNG support (default is JUnit)
	useJUnit {
		dependencies {
			compile(group: 'junit', name: 'junit', version: '[4,)')
		}
	}
}
buildscript {
	repositories {
		jcenter()
	}
	dependencies {
		classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '2.2.4')
	}
}

artifacts { 
	archives coreJar
	archives coreJar16
	archives coreJar17
	archives sourceJar
	archives sourceJar16
	archives sourceJar17
	archives javadocJar
	archives fullJar
}


jacoco {
    toolVersion = "0.7.4.201502262128"
}
jacocoTestReport {
    group = "Reporting"
    description = "Generate Jacoco coverage reports after running tests."
    executionData = files("$buildDir/jacoco/test.exec")
    reports {
        xml {
            enabled true
            //Following value is a file
            destination "${buildDir}/reports/jacoco/jacoco.xml"
        }
        csv.enabled false
        html {
            enabled true
            //Following value is a folder
            destination "${buildDir}/reports/jacoco"
        }
    }
}

sourceSets.main.output.classesDir 'build/classes/main'

sourceCompatibility = 1.8
targetCompatibility = 1.8

defaultTasks 'clean', 'test', 'all'
