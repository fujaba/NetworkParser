// -PlectureBuild -Pjenkins clean --refresh-dependencies build
apply plugin: 'java'
apply plugin: 'maven'
apply from: 'gradle/version.gradle'
apply from: 'gradle/tasks.gradle'

repositories {
	jcenter()
	mavenCentral()
}
dependencies {
	testCompile group: 'junit', name: 'junit', version: '4.+'
}
buildscript {
	repositories {
		jcenter()
	}
	dependencies {
		classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '2.2.4')
	}
}

// only for jenkins
if(project.hasProperty('jenkins')) {
	//Artifactory
	apply from: 'gradle/artifactory.gradle'
	
} else {
	apply from: 'gradle/ide.gradle'
}

apply plugin: 'jacoco'
jacoco {
	toolVersion = "0.7.4.201502262128"
	reportsDir = file("$buildDir/test-results")
}

jacocoTestReport {
additionalSourceDirs = files(sourceSets.main.allSource.srcDirs)
        sourceDirectories = files(sourceSets.main.allSource.srcDirs)
        classDirectories =  files(sourceSets.main.output)
	reports {
		xml.enabled true
		xml.destination "${buildDir}/test-results/xml"
		html.enabled true
		html.destination "${buildDir}/test-results/html"
		csv.enabled true
	}
}

sourceSets.main.output.classesDir 'build/classes/main'

sourceCompatibility = 1.8
targetCompatibility = 1.8

defaultTasks 'clean', 'test', 'all'
